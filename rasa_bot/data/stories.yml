version: "3.1"

stories:

# ===== BASIC INTERACTION =====
- story: greet and goodbye
  steps:
  - intent: greet
  - action: utter_greet
  - intent: goodbye
  - action: utter_goodbye

# ===== MENU & DISHES =====
- story: view menu
  steps:
  - intent: view_menu
  - action: action_show_menu

- story: view menu categories
  steps:
  - intent: ask_menu_categories
  - action: action_show_menu

- story: view featured dishes
  steps:
  - intent: ask_featured_dishes
  - action: action_show_bestseller_dishes

- story: ask popular dishes
  steps:
  - intent: ask_popular_dishes
  - action: action_show_popular_dishes

- story: ask special dishes
  steps:
  - intent: ask_special_dishes
  - action: action_show_special_dishes

- story: recommend dishes
  steps:
  - intent: recommend_dishes
  - action: action_recommend_dishes

- story: ask dish details
  steps:
  - intent: ask_dish_details
  - action: action_ask_dish_details

- story: ask dish price
  steps:
  - intent: ask_dish_price
  - action: action_ask_dish_price

# ===== BOOKING =====
- story: book table
  steps:
  - intent: book_table
  - action: action_book_table

- story: confirm booking
  steps:
  - intent: confirm_booking
  - action: action_confirm_booking

- story: modify booking
  steps:
  - intent: modify_booking
  - action: action_modify_booking

- story: cancel reservation
  steps:
  - intent: cancel_reservation
  - action: action_cancel_reservation

- story: check available tables
  steps:
  - intent: ask_available_tables
  - action: action_show_available_tables

# ===== ORDERING =====
- story: order food
  steps:
  - intent: order_food
  - action: action_add_to_order

- story: order food with confirmation
  steps:
  - intent: order_food
  - action: action_add_to_order
  - intent: affirm
  - action: action_confirm_order_item

- story: order food and deny suggestion
  steps:
  - intent: order_food
  - action: action_add_to_order
  - intent: deny
  - action: utter_deny_request

- story: add to order
  steps:
  - intent: add_to_order
  - action: action_add_to_order

- story: add to order with confirmation
  steps:
  - intent: add_to_order
  - action: action_add_to_order
  - intent: affirm
  - action: action_confirm_order_item

- story: select dish by number from suggestions
  steps:
  - intent: order_food
  - action: action_add_to_order
  - intent: order_item_reference
  - action: action_select_dish_by_number

- story: view current order
  steps:
  - intent: view_current_order
  - action: action_show_current_order

- story: modify order
  steps:
  - intent: modify_order
  - action: action_modify_order

- story: confirm order
  steps:
  - intent: confirm_order
  - action: action_confirm_order

- story: cancel order
  steps:
  - intent: cancel_order
  - action: action_cancel_order

# ===== RESTAURANT INFO =====
- story: ask opening hours
  steps:
  - intent: ask_opening_hours
  - action: action_show_opening_hours

- story: ask address
  steps:
  - intent: ask_address
  - action: action_show_address

- story: ask contact
  steps:
  - intent: ask_contact
  - action: action_show_contact

- story: ask promotions
  steps:
  - intent: ask_promotions
  - action: action_show_promotions

# ===== COMPLETE FLOWS =====
- story: complete menu to order flow
  steps:
  - intent: greet
  - action: utter_greet
  - intent: view_menu
  - action: action_show_menu
  - intent: ask_dish_price
  - action: action_ask_dish_price
  - intent: order_food
  - action: action_add_to_order
  - intent: confirm_order
  - action: action_confirm_order

- story: menu then booking
  steps:
  - intent: view_menu
  - action: action_show_menu
  - intent: ask_popular_dishes
  - action: action_show_popular_dishes
  - intent: book_table
  - action: action_book_table

# ===== CONVERSATION MANAGEMENT STORIES =====

- story: contextual dish question after viewing menu
  steps:
  - intent: view_menu
  - action: action_show_menu
  - intent: contextual_question  # "món đó giá bao nhiêu?"
  - action: action_conversation_manager

- story: modify booking with specific field
  steps:
  - intent: book_table
  - action: action_book_table
  - intent: modify_specific_field  # "sửa số người"
  - action: action_modify_booking

- story: order modification workflow
  steps:
  - intent: add_to_order
  - action: action_add_to_order
  - intent: view_current_order
  - action: action_show_current_order
  - intent: modify_order
  - action: action_modify_order

- story: booking confirmation with editing
  steps:
  - intent: book_table
  - action: action_book_table
  - intent: modify_specific_field  # "sửa ngày"
  - action: action_modify_booking
  - intent: confirm_booking
  - action: action_confirm_booking

- story: order confirmation with contextual modifications
  steps:
  - intent: add_to_order
  - action: action_add_to_order
  - intent: confirm_order
  - action: action_confirm_order
  - intent: contextual_question  # "món đó xóa được không?"
  - action: action_conversation_manager

- story: smart suggestions on unclear input
  steps:
  - intent: view_menu
  - action: action_show_menu
  - intent: contextual_question  # unclear input that needs context
  - action: action_conversation_manager

- story: natural conversation flow with context
  steps:
  - intent: greet
  - action: utter_greet
  - intent: view_menu
  - action: action_show_menu
  - intent: contextual_question  # "cái này có ngon không?"
  - action: action_conversation_manager
  - intent: order_food
  - action: action_add_to_order

# ===== PAYMENT STORIES =====
- story: simple payment request
  steps:
  - intent: request_payment
  - action: action_initiate_payment

- story: payment with cash
  steps:
  - intent: request_payment
  - action: action_initiate_payment
  - intent: process_payment
    entities:
    - payment_method: "cash"
  - action: action_process_payment

- story: payment with card
  steps:
  - intent: request_payment
  - action: action_initiate_payment
  - intent: process_payment
    entities:
    - payment_method: "card"
  - action: action_process_payment

- story: payment with bank transfer
  steps:
  - intent: request_payment
  - action: action_initiate_payment
  - intent: process_payment
    entities:
    - payment_method: "bank_transfer"
  - action: action_process_payment

- story: check payment status
  steps:
  - intent: check_payment_status
  - action: action_check_payment_status

- story: order then payment flow
  steps:
  - intent: confirm_order
  - action: action_confirm_order
  - intent: request_payment
  - action: action_initiate_payment
  - intent: process_payment
  - action: action_process_payment

- story: ask payment methods
  steps:
  - intent: select_payment_method
  - action: action_initiate_payment
